function parseOBJ(s,t=!1){const e=[],n=[],r=[],a=[],p=[],i=[],l=s.split("\n");for(let s of l){if(s=s.trim(),s.startsWith("#")||""===s)continue;const t=s.split(/\s+/);switch(t[0]){case"v":e.push(t.slice(1).map(Number));break;case"vt":n.push(t.slice(1).map(Number));break;case"vn":r.push(t.slice(1).map(Number));break;case"f":for(let s=1;s<t.length;++s){const e=t[s].split("/");a.push(parseInt(e[0],10)-1),e[1]&&p.push(parseInt(e[1],10)-1),e[2]&&i.push(parseInt(e[2],10)-1)}}}if(t){const s=[],t=[],l=[],o=[];for(let c=0;c<a.length;++c)s.push(e[a[c]]),p.length&&t.push(n[p[c]]),i.length&&l.push(r[i[c]]),o.push(c);return{positions:s.flat(),texcoords:t.flat(),normals:l.flat(),indices:o}}return{positions:e.flat(),texcoords:n.flat(),normals:r.flat(),indices:a}}export{parseOBJ};